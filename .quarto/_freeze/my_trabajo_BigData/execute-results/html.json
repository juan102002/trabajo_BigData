{
  "hash": "493a889723ce526cf50e7ff3e8746356",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"La vivienda, una mirada a Europa y a España\"\ndescription: |\n  Analizando la evolución del alquiler en los países de Europa y en las comunidades autónomas de España\nauthor:   \n  - Jorge Moreno Lahiguera (molajor@alumni.uv.es)\\n   \n  - Victor Cloquell Perez (viclope@alumni.uv.es)\\n\n  - Juan Pablo Endrino (juanpaen@alumni.uv.es)\ndate: 2025-12-07                           #--\ncategories: [trabajo BigData]      #--\nimage: \"./imagenes/imagen_01.png\"\ntitle-block-banner: true #- {true, false, \"green\",\"#AA0000\"}\ntitle-block-banner-color: \"red\"    #-\"#FFFFFF\" \ntoc-depth: 3\nsmooth-scroll: true\nformat: \n  html:\n    #backgroundcolor: \"#F1F3F4\"\n    #embed-resources: true\n    link-external-newwindow: true\n    #css: assets/my_css_file.css   \n    code-fold: true #para que el codigo se pliegue\n    code-summary: \"Desplegar codigo\"  #para ver eso al hacer clic y desplegar el codigo\n    code-line-numbers: true  #para ver el numero de las lineas en el codigo\n    code-tools: true #para que aparezca la opción de copiar el codigo al portapapeles.\ncode-tools: true\ncode-link: true\nexecute:\n  echo: true #para que el codigo se incluya en el documento final.\n  eval: true #para que el codigo se evalue y se muestren los resultados (tablas, graficas)\n  warning: false #para que no se incluyan avisos, ya que queda feo\n  message: false #para que no se incluyan mensajes, ya que queda feo \n---\n\n# Introducción\n\nEn los últimos años la vivienda, tanto el alquiler como la compra de esta, se ha convertido en una de las principales preocupaciones de los españoles. Esto no es un fenómeno único de nuestro país, la situación es similar en otras partes de Europa y del mundo.\n\nPor esta razón hemos decidido investigar sobre este problema, empezando por observar ciertas variables a nivel continental, usando datos de Eurostat y de la OECD. Para luego continuar analizando la situación en España, con datos del INE.\n\nEn este documento, en algunos momentos puntuales también hablaremos sobre detalles del código que usamos para obtener lo que el lector vera.\n\nPrimero cargaremos los paquetes necesarios:\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n#install.packages(\"eurostat\")\n#install.packages(\"tidyverse\")\n#install.packages(\"ggplot2\")\n#install.packages(\"gganimate\")\n#install.packages(\"ggthemes\")\n#install.packages(\"gt\")\n#install.packages(\"gtExtras\")\n#install.packages(\"tidyr\")\n#install.packages(\"sf\")\n#install.packages(\"giscoR\")\n#install.packages(\"ragg\")\n#install.packages(\"gifski\")\n#install.packages(\"lubridate\")\n#install.packages(\"DT\")\n#install.packages(\"pjpv.curso.R.2022\")\n#install.packages(\"classInt\")\n#install.packages(\"stringr\")\n#install.packages(\"pxR\")\n#install.packages(\"devtools\")\n\nlibrary(pxR)\nlibrary(eurostat)\nlibrary(tidyverse)\nlibrary(ggplot2)\nlibrary(gganimate)\nlibrary(ggthemes)\nlibrary(gt)\nlibrary(gtExtras)\nlibrary(tidyr)\nlibrary(sf)        \nlibrary(giscoR)\nlibrary(ragg)\n\nlibrary(lubridate)\nlibrary(DT)\ndevtools::install_github(\"perezp44/pjpv.curso.R.2022\")\nlibrary(classInt)\nlibrary(stringr)\n\n#Usamos esto para solucionar problemas con los gráficos animados\nlibrary(gifski)\n```\n:::\n\n\n\n# [Europa y el precio del alquiler]{style=\"color: yellow; background-color: blue\"}\n  \nLo sabemos, esto del título es una horterada, pero es para que Pedro vea que le hacemos caso en clase ;)\n\n## ¿Dónde sube más el alquiler y por que?\nObtenemos el dataset de Eurostat, directamente usando el paquete del mismo nombre. En el dataset tenemos observaciones del cambio del precio del alquiler en el periodo 1996-2024, usando el año 2014 como base. Trabajamos el dataset para quitar países que no nos interesan y otras variables que no nos importan. Posteriormente obtenemos los seis países de la UE en los que más ha subido el precio del alquiler en el mencionado periodo.\nEl dataset contiene observaciones sobre un conjunto de . Hay   variables.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n#Escogemos los datos de la página de Eurostat\nmy_table <- \"prc_hicp_aind\"\n\neurostat::label_eurostat_tables(my_table)\n#> [1] \"HICP - annual data (average index and rate of change)\"\n\n#Creamos el dataframe asociado al índice de IPC de Eurostat y filtramos\ndf <- eurostat::get_eurostat(my_table, time_format = \"raw\")   \n#> \nindexed 0B in  0s, 0B/s\nindexed 2.15GB in  0s, 2.15GB/s\n                                                                              \n\ndf_alquileres_index <- df %>%\n                        filter(coicop == \"CP041\",\n                        !geo %in% c(\"EU27_2020\", \"EA19\", \"EU28\", \n                                    \"EA\", \"EA20\",\"EA19\", \"US\", \n                                    \"XK\", \"TR\", \"RS\", \"AL\", \"MK\", \n                                    \"ME\", \"UK\", \"EEA\", \"EU\")) %>%\n                        label_eurostat() %>%\n                        filter(unit == \"Annual average index\") %>%\n                        dplyr::rename(paises = geo,\n                               año = TIME_PERIOD) %>%\n                        mutate(año = as.numeric(año)) %>%\n                        select(-freq) \n\n##Top (Los 6 que más han crecido desde 2015 hasta 2024)\ndf_alquileres_top_6_2024 <- df_alquileres_index %>%\n                             filter(año == 2024) %>%\n                             slice_max(values, n=6) \n\ntabla_df_alquileres_top_6_2024 <- df_alquileres_top_6_2024 %>%\n                                   gt() %>% \n                                   gt_theme_excel() %>% \n                                   tab_header(title = \"Tabla 1: Incremento del precio del alquiler\\nen los 6 países que más ha crecido\",\n                                               subtitle = \"TOP 6\") %>% \n                                   tab_footnote(footnote = \"Eurostat 2025\")\n\ntabla_df_alquileres_top_6_2024\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"onwmxtvcwa\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#onwmxtvcwa table {\n  font-family: Calibri, system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#onwmxtvcwa thead, #onwmxtvcwa tbody, #onwmxtvcwa tfoot, #onwmxtvcwa tr, #onwmxtvcwa td, #onwmxtvcwa th {\n  border-style: none;\n}\n\n#onwmxtvcwa p {\n  margin: 0;\n  padding: 0;\n}\n\n#onwmxtvcwa .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #000000;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #000000;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #000000;\n  border-left-style: solid;\n  border-left-width: 2px;\n  border-left-color: #000000;\n}\n\n#onwmxtvcwa .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#onwmxtvcwa .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#onwmxtvcwa .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#onwmxtvcwa .gt_heading {\n  background-color: #FFFFFF;\n  text-align: left;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#onwmxtvcwa .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #000000;\n}\n\n#onwmxtvcwa .gt_col_headings {\n  border-top-style: none;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #000000;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#onwmxtvcwa .gt_col_heading {\n  color: #FFFFFF;\n  background-color: #000000;\n  font-size: 85%;\n  font-weight: bold;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#onwmxtvcwa .gt_column_spanner_outer {\n  color: #FFFFFF;\n  background-color: #000000;\n  font-size: 85%;\n  font-weight: bold;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#onwmxtvcwa .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#onwmxtvcwa .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#onwmxtvcwa .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #000000;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#onwmxtvcwa .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#onwmxtvcwa .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #000000;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #000000;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #000000;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #000000;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#onwmxtvcwa .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #000000;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #000000;\n  vertical-align: middle;\n}\n\n#onwmxtvcwa .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#onwmxtvcwa .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#onwmxtvcwa .gt_row {\n  padding-top: 1px;\n  padding-bottom: 1px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #000000;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #000000;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #000000;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#onwmxtvcwa .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #000000;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#onwmxtvcwa .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#onwmxtvcwa .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#onwmxtvcwa .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#onwmxtvcwa .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#onwmxtvcwa .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#onwmxtvcwa .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#onwmxtvcwa .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#onwmxtvcwa .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#onwmxtvcwa .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#onwmxtvcwa .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#onwmxtvcwa .gt_striped {\n  background-color: #D3D3D3;\n}\n\n#onwmxtvcwa .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#onwmxtvcwa .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#onwmxtvcwa .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#onwmxtvcwa .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#onwmxtvcwa .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#onwmxtvcwa .gt_left {\n  text-align: left;\n}\n\n#onwmxtvcwa .gt_center {\n  text-align: center;\n}\n\n#onwmxtvcwa .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#onwmxtvcwa .gt_font_normal {\n  font-weight: normal;\n}\n\n#onwmxtvcwa .gt_font_bold {\n  font-weight: bold;\n}\n\n#onwmxtvcwa .gt_font_italic {\n  font-style: italic;\n}\n\n#onwmxtvcwa .gt_super {\n  font-size: 65%;\n}\n\n#onwmxtvcwa .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#onwmxtvcwa .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#onwmxtvcwa .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#onwmxtvcwa .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#onwmxtvcwa .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#onwmxtvcwa .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#onwmxtvcwa .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#onwmxtvcwa .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#onwmxtvcwa div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"5\" class=\"gt_heading gt_title gt_font_normal\" style>Tabla 1: Incremento del precio del alquiler\nen los 6 países que más ha crecido</td>\n    </tr>\n    <tr class=\"gt_heading\">\n      <td colspan=\"5\" class=\"gt_heading gt_subtitle gt_font_normal gt_bottom_border\" style>TOP 6</td>\n    </tr>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" style=\"border-left-width: 2px; border-left-style: solid; border-left-color: black;\" scope=\"col\" id=\"unit\">unit</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"coicop\">coicop</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"paises\">paises</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"año\">año</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" style=\"border-right-width: 2px; border-right-style: solid; border-right-color: black;\" scope=\"col\" id=\"values\">values</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"unit\" class=\"gt_row gt_left\" style=\"border-left-width: 2px; border-left-style: solid; border-left-color: black; border-right-width: 1px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;\">Annual average index</td>\n<td headers=\"coicop\" class=\"gt_row gt_left\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: black; border-right-width: 1px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;\">Actual rentals for housing</td>\n<td headers=\"paises\" class=\"gt_row gt_left\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: black; border-right-width: 1px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;\">Hungary</td>\n<td headers=\"año\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: black; border-right-width: 1px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;\">2024</td>\n<td headers=\"values\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: black; border-right-width: 2px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;\">187.10</td></tr>\n    <tr><td headers=\"unit\" class=\"gt_row gt_left gt_striped\" style=\"border-left-width: 2px; border-left-style: solid; border-left-color: black; border-right-width: 1px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;\">Annual average index</td>\n<td headers=\"coicop\" class=\"gt_row gt_left gt_striped\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: black; border-right-width: 1px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;\">Actual rentals for housing</td>\n<td headers=\"paises\" class=\"gt_row gt_left gt_striped\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: black; border-right-width: 1px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;\">Lithuania</td>\n<td headers=\"año\" class=\"gt_row gt_right gt_striped\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: black; border-right-width: 1px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;\">2024</td>\n<td headers=\"values\" class=\"gt_row gt_right gt_striped\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: black; border-right-width: 2px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;\">173.73</td></tr>\n    <tr><td headers=\"unit\" class=\"gt_row gt_left\" style=\"border-left-width: 2px; border-left-style: solid; border-left-color: black; border-right-width: 1px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;\">Annual average index</td>\n<td headers=\"coicop\" class=\"gt_row gt_left\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: black; border-right-width: 1px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;\">Actual rentals for housing</td>\n<td headers=\"paises\" class=\"gt_row gt_left\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: black; border-right-width: 1px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;\">Slovenia</td>\n<td headers=\"año\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: black; border-right-width: 1px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;\">2024</td>\n<td headers=\"values\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: black; border-right-width: 2px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;\">170.51</td></tr>\n    <tr><td headers=\"unit\" class=\"gt_row gt_left gt_striped\" style=\"border-left-width: 2px; border-left-style: solid; border-left-color: black; border-right-width: 1px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;\">Annual average index</td>\n<td headers=\"coicop\" class=\"gt_row gt_left gt_striped\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: black; border-right-width: 1px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;\">Actual rentals for housing</td>\n<td headers=\"paises\" class=\"gt_row gt_left gt_striped\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: black; border-right-width: 1px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;\">Poland</td>\n<td headers=\"año\" class=\"gt_row gt_right gt_striped\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: black; border-right-width: 1px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;\">2024</td>\n<td headers=\"values\" class=\"gt_row gt_right gt_striped\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: black; border-right-width: 2px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;\">166.40</td></tr>\n    <tr><td headers=\"unit\" class=\"gt_row gt_left\" style=\"border-left-width: 2px; border-left-style: solid; border-left-color: black; border-right-width: 1px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;\">Annual average index</td>\n<td headers=\"coicop\" class=\"gt_row gt_left\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: black; border-right-width: 1px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;\">Actual rentals for housing</td>\n<td headers=\"paises\" class=\"gt_row gt_left\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: black; border-right-width: 1px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;\">Ireland</td>\n<td headers=\"año\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: black; border-right-width: 1px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;\">2024</td>\n<td headers=\"values\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: black; border-right-width: 2px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;\">166.10</td></tr>\n    <tr><td headers=\"unit\" class=\"gt_row gt_left gt_striped\" style=\"border-left-width: 2px; border-left-style: solid; border-left-color: black; border-right-width: 1px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 2px; border-bottom-style: solid; border-bottom-color: black;\">Annual average index</td>\n<td headers=\"coicop\" class=\"gt_row gt_left gt_striped\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: black; border-right-width: 1px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 2px; border-bottom-style: solid; border-bottom-color: black;\">Actual rentals for housing</td>\n<td headers=\"paises\" class=\"gt_row gt_left gt_striped\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: black; border-right-width: 1px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 2px; border-bottom-style: solid; border-bottom-color: black;\">Iceland</td>\n<td headers=\"año\" class=\"gt_row gt_right gt_striped\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: black; border-right-width: 1px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 2px; border-bottom-style: solid; border-bottom-color: black;\">2024</td>\n<td headers=\"values\" class=\"gt_row gt_right gt_striped\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: black; border-right-width: 2px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 2px; border-bottom-style: solid; border-bottom-color: black;\">159.84</td></tr>\n  </tbody>\n  <tfoot>\n    <tr class=\"gt_footnotes\">\n      <td class=\"gt_footnote\" colspan=\"5\"> Eurostat 2025</td>\n    </tr>\n  </tfoot>\n</table>\n</div>\n```\n\n:::\n:::\n\n---\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ntop_paises <- df_alquileres_top_6_2024$paises\n\ndf_top <- df_alquileres_index %>%\n           filter(paises %in% top_paises)\n\n#Gráfico del top\ngrafico_top <- ggplot(df_top, \n                      aes(x = año, y = values, color = paises)) +\n                geom_line(size = 1.4) +\n                labs(title = \"Gráfico 1: Incremento del precio del alquiler\\n(Base 2015) del TOP 6 Países\", \n                    x = \"Año\", y = \"Porcentaje (Base 2015)\",\n                    caption = \"Fuente: Eurostat 2025\") +\n                scale_x_continuous(breaks = seq(1996, 2024, by = 2)) +\n                scale_y_continuous(breaks = seq(0, 200, by = 25)) +\n                theme_stata() +\n                theme(legend.position = \"none\", \n                      axis.text.y = element_text(angle = 0),\n                      axis.text.x = element_text(angle = 90, vjust = 0.5)) +\n                geom_text(aes(label = paises))\n\ngrafico_top_animado <- grafico_top + transition_reveal(año) \n\nanimate(grafico_top_animado, \n        renderer = gifski_renderer())\n```\n\n::: {.cell-output-display}\n![](my_trabajo_BigData_files/figure-html/unnamed-chunk-3-1.gif){fig-align='center' width=95%}\n:::\n:::\n\n\nLos países de Europa del Este han experimentado un crecimiento económico rápido que ha elevado los salarios, pero la oferta de vivienda no ha seguido el ritmo. Además, han tenido las tasas de inflación general más altas de la UE tras la crisis energética (súbida del precio desde 2021). También está la presencia de Irlanda por la escasez crónica de oferta: la alta demanda (impulsada por el sector tecnológico y la inmigración) choca con un mercado inmobiliario que no construye lo suficiente, provocando una de las crisis de alquiler más agudas de Europa occidental. Islandia es un caso particular por el Efecto Airbnb (Turismo masivo): Gran parte del parque de viviendas se ha destinado al alquiler turístico, reduciendo drásticamente la oferta para residentes y disparando los precios, sumado a su muy limitado terreno edificable y su alta inflación.\n\n## ¿Y donde sube menos?\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n#Nontop (Los 6 que menos han crecido desde 2015 hasta 2024)\ndf_alquileres_nontop_6_2024 <- df_alquileres_index %>%\n                                filter(año == 2024) %>%\n                                slice_min(values, n=6)\n\ntabla_df_alquileres_nontop_6_2024 <- df_alquileres_nontop_6_2024 %>%\n                                gt() %>% \n                                gt_theme_excel() %>% \n                                tab_header(title = \"Tabla 2: Incremento del precio del alquiler\\nen los 6 países que menos ha crecido\",\n                                           subtitle = \"NONTOP 6\") %>% \n                                tab_footnote(footnote = \"Eurostat 2025\")\n\ntabla_df_alquileres_nontop_6_2024\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"jutmcekjxu\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#jutmcekjxu table {\n  font-family: Calibri, system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#jutmcekjxu thead, #jutmcekjxu tbody, #jutmcekjxu tfoot, #jutmcekjxu tr, #jutmcekjxu td, #jutmcekjxu th {\n  border-style: none;\n}\n\n#jutmcekjxu p {\n  margin: 0;\n  padding: 0;\n}\n\n#jutmcekjxu .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #000000;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #000000;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #000000;\n  border-left-style: solid;\n  border-left-width: 2px;\n  border-left-color: #000000;\n}\n\n#jutmcekjxu .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#jutmcekjxu .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#jutmcekjxu .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#jutmcekjxu .gt_heading {\n  background-color: #FFFFFF;\n  text-align: left;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#jutmcekjxu .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #000000;\n}\n\n#jutmcekjxu .gt_col_headings {\n  border-top-style: none;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #000000;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#jutmcekjxu .gt_col_heading {\n  color: #FFFFFF;\n  background-color: #000000;\n  font-size: 85%;\n  font-weight: bold;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#jutmcekjxu .gt_column_spanner_outer {\n  color: #FFFFFF;\n  background-color: #000000;\n  font-size: 85%;\n  font-weight: bold;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#jutmcekjxu .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#jutmcekjxu .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#jutmcekjxu .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #000000;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#jutmcekjxu .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#jutmcekjxu .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #000000;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #000000;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #000000;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #000000;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#jutmcekjxu .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #000000;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #000000;\n  vertical-align: middle;\n}\n\n#jutmcekjxu .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#jutmcekjxu .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#jutmcekjxu .gt_row {\n  padding-top: 1px;\n  padding-bottom: 1px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #000000;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #000000;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #000000;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#jutmcekjxu .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #000000;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#jutmcekjxu .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#jutmcekjxu .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#jutmcekjxu .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#jutmcekjxu .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#jutmcekjxu .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#jutmcekjxu .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#jutmcekjxu .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#jutmcekjxu .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#jutmcekjxu .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#jutmcekjxu .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#jutmcekjxu .gt_striped {\n  background-color: #D3D3D3;\n}\n\n#jutmcekjxu .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#jutmcekjxu .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#jutmcekjxu .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#jutmcekjxu .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#jutmcekjxu .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#jutmcekjxu .gt_left {\n  text-align: left;\n}\n\n#jutmcekjxu .gt_center {\n  text-align: center;\n}\n\n#jutmcekjxu .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#jutmcekjxu .gt_font_normal {\n  font-weight: normal;\n}\n\n#jutmcekjxu .gt_font_bold {\n  font-weight: bold;\n}\n\n#jutmcekjxu .gt_font_italic {\n  font-style: italic;\n}\n\n#jutmcekjxu .gt_super {\n  font-size: 65%;\n}\n\n#jutmcekjxu .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#jutmcekjxu .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#jutmcekjxu .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#jutmcekjxu .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#jutmcekjxu .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#jutmcekjxu .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#jutmcekjxu .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#jutmcekjxu .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#jutmcekjxu div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"5\" class=\"gt_heading gt_title gt_font_normal\" style>Tabla 2: Incremento del precio del alquiler\nen los 6 países que menos ha crecido</td>\n    </tr>\n    <tr class=\"gt_heading\">\n      <td colspan=\"5\" class=\"gt_heading gt_subtitle gt_font_normal gt_bottom_border\" style>NONTOP 6</td>\n    </tr>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" style=\"border-left-width: 2px; border-left-style: solid; border-left-color: black;\" scope=\"col\" id=\"unit\">unit</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"coicop\">coicop</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"paises\">paises</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"año\">año</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" style=\"border-right-width: 2px; border-right-style: solid; border-right-color: black;\" scope=\"col\" id=\"values\">values</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"unit\" class=\"gt_row gt_left\" style=\"border-left-width: 2px; border-left-style: solid; border-left-color: black; border-right-width: 1px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;\">Annual average index</td>\n<td headers=\"coicop\" class=\"gt_row gt_left\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: black; border-right-width: 1px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;\">Actual rentals for housing</td>\n<td headers=\"paises\" class=\"gt_row gt_left\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: black; border-right-width: 1px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;\">Greece</td>\n<td headers=\"año\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: black; border-right-width: 1px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;\">2024</td>\n<td headers=\"values\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: black; border-right-width: 2px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;\">102.92</td></tr>\n    <tr><td headers=\"unit\" class=\"gt_row gt_left gt_striped\" style=\"border-left-width: 2px; border-left-style: solid; border-left-color: black; border-right-width: 1px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;\">Annual average index</td>\n<td headers=\"coicop\" class=\"gt_row gt_left gt_striped\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: black; border-right-width: 1px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;\">Actual rentals for housing</td>\n<td headers=\"paises\" class=\"gt_row gt_left gt_striped\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: black; border-right-width: 1px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;\">France</td>\n<td headers=\"año\" class=\"gt_row gt_right gt_striped\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: black; border-right-width: 1px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;\">2024</td>\n<td headers=\"values\" class=\"gt_row gt_right gt_striped\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: black; border-right-width: 2px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;\">107.23</td></tr>\n    <tr><td headers=\"unit\" class=\"gt_row gt_left\" style=\"border-left-width: 2px; border-left-style: solid; border-left-color: black; border-right-width: 1px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;\">Annual average index</td>\n<td headers=\"coicop\" class=\"gt_row gt_left\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: black; border-right-width: 1px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;\">Actual rentals for housing</td>\n<td headers=\"paises\" class=\"gt_row gt_left\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: black; border-right-width: 1px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;\">Italy</td>\n<td headers=\"año\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: black; border-right-width: 1px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;\">2024</td>\n<td headers=\"values\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: black; border-right-width: 2px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;\">108.40</td></tr>\n    <tr><td headers=\"unit\" class=\"gt_row gt_left gt_striped\" style=\"border-left-width: 2px; border-left-style: solid; border-left-color: black; border-right-width: 1px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;\">Annual average index</td>\n<td headers=\"coicop\" class=\"gt_row gt_left gt_striped\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: black; border-right-width: 1px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;\">Actual rentals for housing</td>\n<td headers=\"paises\" class=\"gt_row gt_left gt_striped\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: black; border-right-width: 1px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;\">Switzerland</td>\n<td headers=\"año\" class=\"gt_row gt_right gt_striped\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: black; border-right-width: 1px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;\">2024</td>\n<td headers=\"values\" class=\"gt_row gt_right gt_striped\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: black; border-right-width: 2px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;\">110.81</td></tr>\n    <tr><td headers=\"unit\" class=\"gt_row gt_left\" style=\"border-left-width: 2px; border-left-style: solid; border-left-color: black; border-right-width: 1px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;\">Annual average index</td>\n<td headers=\"coicop\" class=\"gt_row gt_left\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: black; border-right-width: 1px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;\">Actual rentals for housing</td>\n<td headers=\"paises\" class=\"gt_row gt_left\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: black; border-right-width: 1px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;\">Spain</td>\n<td headers=\"año\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: black; border-right-width: 1px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;\">2024</td>\n<td headers=\"values\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: black; border-right-width: 2px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;\">110.93</td></tr>\n    <tr><td headers=\"unit\" class=\"gt_row gt_left gt_striped\" style=\"border-left-width: 2px; border-left-style: solid; border-left-color: black; border-right-width: 1px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 2px; border-bottom-style: solid; border-bottom-color: black;\">Annual average index</td>\n<td headers=\"coicop\" class=\"gt_row gt_left gt_striped\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: black; border-right-width: 1px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 2px; border-bottom-style: solid; border-bottom-color: black;\">Actual rentals for housing</td>\n<td headers=\"paises\" class=\"gt_row gt_left gt_striped\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: black; border-right-width: 1px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 2px; border-bottom-style: solid; border-bottom-color: black;\">Luxembourg</td>\n<td headers=\"año\" class=\"gt_row gt_right gt_striped\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: black; border-right-width: 1px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 2px; border-bottom-style: solid; border-bottom-color: black;\">2024</td>\n<td headers=\"values\" class=\"gt_row gt_right gt_striped\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: black; border-right-width: 2px; border-right-style: solid; border-right-color: black; border-top-width: 1px; border-top-style: solid; border-top-color: black; border-bottom-width: 2px; border-bottom-style: solid; border-bottom-color: black;\">112.80</td></tr>\n  </tbody>\n  <tfoot>\n    <tr class=\"gt_footnotes\">\n      <td class=\"gt_footnote\" colspan=\"5\"> Eurostat 2025</td>\n    </tr>\n  </tfoot>\n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n#Gráfico del nontop\nnontop_paises <- df_alquileres_nontop_6_2024$paises\n\ndf_nontop <- df_alquileres_index %>%\n             filter(unit == \"Annual average index\",\n                    paises %in% nontop_paises)\n\ngrafico_nontop <- ggplot(df_nontop, \n                         aes(x = año, y = values, color = paises)) +\n                   geom_line(size = 1.4) +\n                   labs(title = \"Gráfico 2: Incremento del precio del alquiler\\n(Base 2015) en los 6 Países que menos ha crecido\", \n                        x = \"Año\", y = \"Porcentaje (Base 2015)\",\n                   caption = \"Fuente: Eurostat 2025\") +\n                   scale_x_continuous(breaks = seq(1996, 2024, by = 2)) +\n                   scale_y_continuous(breaks = seq(0, 200, by = 25)) +\n                   theme_stata() +\n                   theme(legend.position = \"none\", \n                         axis.text.y = element_text(angle = 0),\n                         axis.text.x = element_text(angle = 90, vjust = 0.5)) +\n                   geom_text(aes(label = paises))\n\ngrafico_nontop_animado <- grafico_nontop + transition_reveal(año) \n\nanimate(grafico_nontop_animado, \n        renderer = gifski_renderer())\n```\n\n::: {.cell-output-display}\n![](my_trabajo_BigData_files/figure-html/unnamed-chunk-5-1.gif){fig-align='center' width=95%}\n:::\n:::\n\n\nEl grupo de los países con menor incremento en el precio, se puede observar un escenario de estancamiento y corrección post-crisis que contrasta radicalmente con el dinamismo del este de Europa. En este conjunto destaca Grecia como una anomalía bajista, donde los alquileres son nominalmente más bajos que en la década anterior debido al colapso de la demanda interna tras su crisis de deuda, mientras que economías mediterráneas como Italia y Chipre muestran una trayectoria casi plana fruto de un crecimiento económico débil. Por otro lado, la presencia de países con mercados tensos como España o Francia en esta parte baja del ranking responde en gran medida a la metodología del índice HICP, que al medir el stock completo de contratos (incluyendo rentas antiguas y renovaciones limitadas por ley) y no solo los nuevos alquileres de mercado, suaviza la curva de precios, reflejando así una Europa donde la regulación y la inercia contractual han blindado estadísticamente a los inquilinos estables frente a la volatilidad inflacionaria reciente.\n\n## Año a año, ¿donde sube mas el alquiler? (Graficos de barras)\n\nEl análisis mediante gráficos nos permitirá obtener otros datos sobre la situación de la vivienda en Europa. A continuación veremos en cada año cuál es el país en el que más ha subido el precio del alquiler con respecto al año anterior.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nmy_table <- \"prc_hicp_aind\"\n\neurostat::label_eurostat_tables(my_table)\n#> [1] \"HICP - annual data (average index and rate of change)\"\n\ndf <- eurostat::get_eurostat(my_table, time_format = \"raw\") \n\ndf_alquileres_anual <- df %>%\n                  filter(coicop == \"CP041\",\n                         unit == \"RCH_A_AVG\",\n                  !geo %in% c(\"EU27_2020\", \"EA19\", \"EU28\", \n                     \"EA\", \"EA20\",\"EA19\", \"US\", \n                     \"XK\", \"TR\", \"RS\", \"AL\", \"MK\", \n                     \"ME\", \"UK\", \"EEA\", \"EU\")) %>%\n                  dplyr::rename(país = geo,\n                         año = TIME_PERIOD) %>%\n                  select(-freq) \n\n\n#TOP (Porcentaje del incremento anual del precio del alquiler del páis donde más ha crecido ese año)\ndf_top <- df_alquileres_anual %>%\n           group_by(año) %>%\n           slice_max(order_by = values, n = 1) %>%\n           ungroup() %>%\n           arrange(año)\n\ngráfico_barras_TOP <- ggplot(df_top, aes(x = año, y = values, fill = país)) +\n                       geom_col() +\n                       labs(title = \"Gráfico 3: Porcentaje del incremento anual del precio\\ndel alquiler del páis donde más ha crecido ese año (UE)\",\n                            x = \"Año\", y = \"Porcentaje del incremento anual\",\n                            caption = \"Eurostat 2025\") +\n                       theme_solarized() +\n                       geom_text(aes(label = país), angle = 90, hjust = 0) +\n                       scale_y_continuous(breaks = seq(0, 170, by = 12.5)) +\n                       theme(axis.text.x = element_text(angle = 90, vjust = 0.5),\n                             legend.position = \"none\")\n\ngráfico_barras_TOP\n```\n\n::: {.cell-output-display}\n![](my_trabajo_BigData_files/figure-html/unnamed-chunk-6-1.png){fig-align='center' width=95%}\n:::\n:::\n\n\nLa evolución de los precios muestra una clara transición de inestabilidad extrema a madurez de mercado, protagonizada casi exclusivamente por las economías de Europa del Este y los países bálticos. Se distinguen dos grandes etapas: un primer periodo de ajuste agresivo (1996-2008), marcado por la apertura post-soviética y la inflación previa a la entrada en el euro, que provocó subidas desorbitadas como el pico histórico de Bulgaria en 1998 (>150%) o el de Rumanía en 2007; seguido de una segunda etapa de estabilización estructural (2009-2024) tras la crisis financiera, donde las subidas se han moderado drásticamente (situándose habitualmente por debajo del 25%) al haberse completado la convergencia económica de estos países con el resto de la Unión Europea.\n\n## ¿Y dónde menos?\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n#NONTOP\ndf_nontop <- df_alquileres_anual %>%\n  group_by(año) %>%\n  slice_min(order_by = values, n = 1) %>%\n  ungroup() %>%\n  arrange(año)\n\ngráfico_barras_NONTOP <- ggplot(df_nontop, aes(x = año, y = values, fill = país)) +\n                          geom_col() +\n                          labs(title = \"Gráfico 4: Porcentaje del incremento anual del precio\\ndel alquiler del páis donde menos ha crecido ese año (UE)\",\n       x = \"Año\", y = \"Porcentaje del incremento anual\",\n                          caption = \"Eurostat 2025\") +\n                          theme_solarized() +\n                          geom_text(aes(label = país), angle = 90, hjust = 0) +\n                          scale_y_continuous(breaks = seq(-40, 10, by = 5)) +\n                          theme(axis.text.x = element_text(angle = 90, vjust = 0.5),\n                          legend.position = \"none\")\n\ngráfico_barras_NONTOP\n```\n\n::: {.cell-output-display}\n![](my_trabajo_BigData_files/figure-html/unnamed-chunk-7-1.png){fig-align='center' width=95%}\n:::\n:::\n\n\nEste gráfico traza la historia de las crisis inmobiliarias europeas a través de los descensos de precios, identificando tres fases muy diferenciadas. Primero, una etapa de corrección violenta post-2008, donde las economías bálticas (Estonia y Lituania) sufrieron desplomes masivos de hasta un 30% al estallar sus burbujas de crédito. Segundo, un largo periodo de deflación estructural en el sur (2012-2018), protagonizado casi en exclusiva por Grecia (EL), que encadenó casi una década de caídas constantes debido a su crisis de deuda y austeridad. Finalmente, el gráfico revela una tendencia actual preocupante tras 2021: la desaparición de las bajadas, ya que en los últimos años (2022-2024) las barras vuelven a ser positivas, indicando que hoy en día los precios suben incluso en los mercados más estancados de Europa.\n\nPara una más cómoda comparación:\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(patchwork) #- utiliza el pkg \"patchwork\" para mostrar los 2 gráficos (p1 y p2) side-by-side\n\ngráfico_barras_TOP_v2 <- ggplot(df_top, aes(x = año, y = values, fill = país)) +\n                       geom_col() +\n                       labs(x = \"Año\", y = \"Porcentaje del incremento anual\",\n                            caption = \"Eurostat 2025\") +\n                       theme_solarized() +\n                       geom_text(aes(label = país), angle = 90, hjust = 0) +\n                       scale_y_continuous(breaks = seq(0, 170, by = 12.5)) +\n                       theme(axis.text.x = element_text(angle = 90, vjust = 0.5),\n                             legend.position = \"none\")\n\ngráfico_barras_NONTOP_v2 <- ggplot(df_nontop, aes(x = año, y = values, fill = país)) +\n                          geom_col() +\n                          labs(x = \"Año\", y = \"Porcentaje del incremento anual\",\n                          caption = \"Eurostat 2025\") +\n                          theme_solarized() +\n                          geom_text(aes(label = país), angle = 90, hjust = 0) +\n                          scale_y_continuous(breaks = seq(-40, 10, by = 5)) +\n                          theme(axis.text.x = element_text(angle = 90, vjust = 0.5),\n                          legend.position = \"none\")\n\ngráfico_barras_TOP_v2 + labs(title = \"Gráfico 5: Países donde más y menos ha incrementado\\nel precio de alquiler anual\") + gráfico_barras_NONTOP_v2 \n```\n\n::: {.cell-output-display}\n![](my_trabajo_BigData_files/figure-html/unnamed-chunk-8-1.png){fig-align='center' width=95%}\n:::\n:::\n\n\n## Mapa Europa\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nmy_table <- \"prc_hicp_aind\"\n\neurostat::label_eurostat_tables(my_table)\n#> [1] \"HICP - annual data (average index and rate of change)\"\n\ndf <- eurostat::get_eurostat(my_table, time_format = \"raw\") \n\ndf_alquileres_anual <- df %>%\n                        filter(coicop == \"CP041\",\n                               unit == \"RCH_A_AVG\",\n                        !geo %in% c(\"EU27_2020\", \"EA19\", \"EU28\", \n                                     \"EA\", \"EA20\",\"EA19\", \"US\", \n                                     \"XK\", \"TR\", \"RS\", \"AL\", \"MK\", \n                                     \"ME\", \"UK\", \"EEA\", \"EU\")) %>%\n                         rename(país = geo,\n                                año = TIME_PERIOD) %>%\n                         select(-freq) %>%\n                         mutate(año = as.numeric(año))\n\nmapa_europa <- gisco_get_nuts(year = \"2021\", \n                              resolution = \"20\", \n                              nuts_level = 0) %>%\n                rename(país = NUTS_ID)\n\nmapa_animado_data <- mapa_europa %>%\n                      inner_join(df_alquileres_anual, by = \"país\") %>%\n                      mutate(incremento_alquileres_grupos = factor(ntile(values, 5),\n                             labels = c(\"Muy baja\", \n                                        \"Baja\", \n                                        \"Moderado\",\n                                        \"Alta\", \n                                        \"Muy alta\")))\n\nanimacion <- ggplot(mapa_animado_data) +\n              geom_sf(aes(fill = incremento_alquileres_grupos), \n                      color = \"white\", \n                      size = 0.1) +\n              scale_fill_viridis_d(option = \"magma\", direction = -1, \n                       name = \"Incremento del precio del alquiler (%)\") + \n              theme_void() +\n              coord_sf(xlim = c(-25, 45), ylim = c(34, 72)) +\n              labs(title = \"Mapa 1: Evolución del Incremento del alquiler entre 1996-2024 en la UE\",\n                   subtitle = \"Año: {current_frame}\",\n                   caption = \"Eurostat 2025\") +\n              transition_manual(año) +\n              ease_aes(\"linear\") \n\nanimate(animacion, renderer = gifski_renderer(), \n        duration = 35, \n        fps = 25, \n        width = 1000,\n        height = 600,\n        units = \"px\",\n        res = 150)\n```\n\n::: {.cell-output-display}\n![](my_trabajo_BigData_files/figure-html/unnamed-chunk-9-1.gif){fig-align='center' width=95%}\n:::\n:::\n\n\n\nLa evolución del incremento anual del precio del alquiler en la Unión Europea durante el periodo 1996-2024 muestra una trayectoria de encarecimiento progresivo, caracterizada por una heterogeneidad geográfica marcada y una aceleración reciente. Mientras que en las primeras décadas se observan tasas de variación moderadas y estables en gran parte de Europa Occidental, la animación revela cómo, tras la crisis financiera y especialmente en el periodo post-pandemia (2021-2024), la intensidad de las subidas se dispara. Los países de Europa del Este y los Estados Bálticos (Estonia, Lituania) tienden a ocupar frecuentemente las categorías de crecimiento \"Muy alta\" (colores más oscuros en tu escala magma) debido a un efecto de convergencia económica y alta inflación reciente, mientras que mercados más regulados como Alemania o Francia suelen mostrar un comportamiento más contenido, aunque con una tendencia alcista generalizada en los últimos fotogramas debido a la presión inflacionaria global.\n\n## OECD Boxplot\n\nCambiamos ahora de fuente. Haciendo uso de los datos de la OECD y mediante un diagrama de cajas observamos la dinámica de la inflación de los alquileres (el ritmo al que suben los precios anualmente), revelando un comportamiento cíclico dramático. Tras dos décadas de relativa estabilidad y una fase de enfriamiento notable entre 2010 y 2020, donde las subidas anuales se moderaron hasta caer cerca del 1% de mediana, se observa una ruptura estructural a partir de 2021. En los últimos tres años (2022-2024), la tendencia se invierte bruscamente con un ascenso vertical, llevando la mediana de incremento anual por encima del 4%, niveles inéditos en la serie histórica. Además, el alargamiento vertical de las cajas en este último periodo indica una mayor volatilidad y disparidad: mientras antes los países se comportaban de forma homogénea, ahora las diferencias en la intensidad de las subidas entre unos mercados y otros son extremas. \n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nurl_ocde <- \"https://sdmx.oecd.org/public/rest/data/OECD.SDD.TPS,DSD_PRICES@DF_PRICES_ALL,1.0/CAN+AUS+BEL+FRA+DEU+ITA+JPN+NLD+ESP+CHE+SWE+GBR+USA+OECD+EU27_2020.A.N.CPI.PA.CP041.N.?startPeriod=1996&endPeriod=2024&dimensionAtObservation=AllDimensions&format=csvfilewithlabels\"\n\n#Creamos el archivo y descargamos los datos\ndir.create(\"datos\")\n\nruta_ocde <- \"./datos/alquileres_ocde_anual.csv\"\n\ncurl::curl_download(url_ocde, ruta_ocde) \n\nalquileres_ocde <- read_csv(ruta_ocde)\n\n#Filtramos los datos\n\nalquileres_ocde_anual <- alquileres_ocde %>%\n                          select(Measure, BASE_PER, EXPENDITURE, Expenditure,                                         `Reference area`, TIME_PERIOD, OBS_VALUE) %>%\n                          mutate(año = TIME_PERIOD,\n                                 values = OBS_VALUE,\n                                 país = `Reference area`) \n#Creamos el gráfico\ngráfico <- ggplot(alquileres_ocde_anual, aes(x = año,  y = values)) +\n      geom_boxplot(aes(group = año, fill = as.factor(año)), outlier.shape = 8) + \n      geom_jitter(width = 0.15, alpha = 1/4, color = \"brown\") +\n      labs(title = \"Gráfico 6: Diagrama de cajas del inncremento anual del\\nprecio del alquiler G-12\", \n           x = \"Año\", y = \"Porcentaje\",\n           caption = \"Fuente: OCDE 2025\") +\n      theme_solarized() + \n      stat_summary(fun = mean, geom = \"line\", color = \"black\", size = 1.2) +               scale_x_continuous(breaks = seq(1996, 2024, by = 1)) +\n      theme(axis.text.x = element_text(angle = 90),\n            legend.position = \"none\")\n\ngráfico \n```\n\n::: {.cell-output-display}\n![](my_trabajo_BigData_files/figure-html/unnamed-chunk-10-1.png){fig-align='center' width=95%}\n:::\n:::\n\n\n\n## OECD Animación\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nurl_ocde <- \"https://sdmx.oecd.org/public/rest/data/OECD.SDD.TPS,DSD_PRICES@DF_PRICES_ALL,1.0/CAN+AUS+BEL+FRA+DEU+ITA+JPN+NLD+ESP+CHE+SWE+GBR+USA+OECD+EU27_2020.A.N.CPI.IX.CP041.N.?startPeriod=1996&endPeriod=2024&dimensionAtObservation=AllDimensions&format=csvfilewithlabels\"\n\n#Creamos el archivo y descargamos los datos\ndir.create(\"datos\")\n\nruta_ocde <- \"./datos/alquileres_ocde.csv\"\n\ncurl::curl_download(url_ocde, ruta_ocde) \n\nalquileres_ocde <- read_csv(ruta_ocde)\n\n#Filtramos los datos\nalquileres_ocde <- alquileres_ocde %>%\n                   select(Measure, BASE_PER, EXPENDITURE, Expenditure,                                         `Reference area`, TIME_PERIOD, OBS_VALUE) %>%\n                   mutate(año = TIME_PERIOD,\n                          values = OBS_VALUE,\n                          país = `Reference area`)\n  \n#Creamos el gráfico \ngráfico <- ggplot(alquileres_ocde, aes(x = año, y = values, color = país)) +\n            geom_line(size = 1.4) +\n            labs(title = \"Gráfico 7: Incremento del precio del alquiler (Base 2015) G-12\", \n                  x = \"Año\", y = \"Porcentaje (Base 2015)\",\n                 caption = \"Fuente: OCDE 2025\") +\n            scale_x_continuous(breaks = seq(1996, 2024, by = 2)) +\n            scale_y_continuous(breaks = seq(50, 150, by = 12.5),\n                               limits = c(50, 150),\n                               expand = c(0, 0)) +\n            theme_stata() +\n            theme(legend.position = \"none\",\n                  axis.text.x = element_text(angle = 90, vjust = 0.5),\n                  axis.text.y = element_text(angle = 0)) +\n            geom_text(aes(label = país))\n  \n#Animámos el gráfico\ngráfico_animado <- gráfico + transition_reveal(año)+\n  enter_fade() + \n  exit_fade()\n\ngráfico_animado\n```\n\n::: {.cell-output-display}\n![](my_trabajo_BigData_files/figure-html/unnamed-chunk-11-1.gif){fig-align='center' width=95%}\n:::\n:::\n\n\nEl gráfico evidencia una tendencia alcista estructural y sostenida en el precio de los alquileres para las principales economías de la OCDE entre 1996 y 2024. Tomando 2015 como año base (índice 100), se observa cómo la totalidad de los países analizados parten de niveles inferiores (cercanos a los 50-60 puntos) a mediados de los noventa y experimentan un crecimiento constante e ininterrumpido a lo largo de las tres décadas. Aunque la pendiente varía según el país —reflejando distintas presiones inflacionarias locales—, la imagen general confirma un encarecimiento progresivo y universal del acceso a la vivienda en alquiler en el bloque occidental, situándose los valores actuales muy por encima de los registros históricos.\n\n# [España y el precio del alquiler]{style=\"color: yellow; background-color: red\"}\n\nDespués de entender un poco la situación en Europa, nos acercamos a lo que más nos concierne, nuestro país, España. Hacemos ciertas modificaciones y entonces podremos empezar a trabajar con los datos.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n#Importamos los datos\n\nmy_url <- \"https://www.ine.es/jaxiT3/files/t/es/px/50914.px?nocab=1\"\n\nfs::dir_create(\"datos\")\n\nmy_destino <- \"./datos/50914.px\"\n\ncurl::curl_download(my_url, my_destino)\n\n#Obtenemos el DataFrame completo\n\ndf <- pxR::read.px(my_destino) %>% as_tibble()\n\n#Filtramos el df y nos quedamos con el subgrupo y el tipo de dato a estudiar. Tambien quitamos los NA de la columna value\n\nnames(df)\n#> [1] \"Periodo\"                          \"Tipo.de.dato\"                    \n#> [3] \"Subgrupos\"                        \"Comunidades.y.Ciudades.Autónomas\"\n#> [5] \"value\"\nnombres_actuales <- names(df)\nnombres_actuales[4] <- \"CCAA\"\nnames(df) <- nombres_actuales\n\n\ndf_VIVIENDA <- df %>% \n  filter(Subgrupos == \"041 Alquiler de vivienda\", Tipo.de.dato == \"Variación anual\")  %>%\n  filter(!is.na(value)) \n  \n\n#Cambiamos el formato de la fecha con el paquete lubridate\n\ndf_VIVIENDA_Fechas <- df_VIVIENDA %>%\n    arrange(CCAA, Periodo) %>%\n    mutate(Fecha_Base = gsub(\"M\", \"-\", Periodo),\n    Fecha_Completa = paste0(Fecha_Base, \"-01\"),\n    Periodo_Fecha = ymd(Fecha_Completa)) %>%\n    select(-Fecha_Base, -Fecha_Completa,-Periodo)\n\ndf__VIVIENDA <- df_VIVIENDA_Fechas %>%\n  filter(month(Periodo_Fecha) == 1) %>%\n  arrange(Periodo_Fecha) %>%\n  mutate(Periodo_Fecha = as.Date(Periodo_Fecha, format = \"%Y-%m-%d\"))\n\n#Obtenemos el data frame final \"bonito\" con el que trabajar\n\ndf_FINAL_VIVIENDA <- df__VIVIENDA %>%\n  select(-Subgrupos, -Tipo.de.dato) %>%\n  dplyr::rename(var_anual_precio_alquiler = value)\n\nstr(df_FINAL_VIVIENDA)\n#> tibble [480 × 3] (S3: tbl_df/tbl/data.frame)\n#>  $ CCAA                     : Factor w/ 20 levels \"Nacional\",\"01 Andalucía\",..: 1 2 3 4 5 6 7 8 9 10 ...\n#>  $ var_anual_precio_alquiler: num [1:480] 4.3 4.5 5.1 3.2 6.9 3.2 2.9 3.9 3.9 4.5 ...\n#>  $ Periodo_Fecha            : Date[1:480], format: \"2002-01-01\" \"2002-01-01\" ...\n```\n:::\n\n\nPara ver cómo ha evolucionado la variación anual del precio del alquiler NACIONAL desde 2002 a 2025 crearemos un gráfico. Además este nos servira como gráfico introductorio para ver los datos que trataremos en esta sección.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndf_vivienda_nacional <- df_FINAL_VIVIENDA %>% filter(CCAA == \"Nacional\")\n\np1 <- ggplot(df_vivienda_nacional, aes(x = Periodo_Fecha, y = var_anual_precio_alquiler)) +\n  geom_line(aes(color = \"Nacional\"), linewidth = 0.8, linetype = \"dashed\") +\n  geom_point() +\n  scale_color_manual(values = c(\"Nacional\" = \"#004488\")) +\n  labs(title = \"Gráfico 8: Evolución de la variación anual del precio del alquiler\\na nivel NACIONAL\",\n       subtitle = \"Periodo comprendido entre 2002-2025\",\n       caption = \"Fuente: INE\",\n       x = \"Periodo (años)\",\n       y = \"Variación anual (%)\",\n       color = \"Región\") + \n  scale_x_date(date_breaks = \"2 year\", date_labels = \"%Y\") \n\np1\n```\n\n::: {.cell-output-display}\n![](my_trabajo_BigData_files/figure-html/P error 2-1.png){fig-align='center' width=95%}\n:::\n:::\n\nEl Gráfico 8 evidencia una marcada volatilidad en el crecimiento anual de los precios del alquiler entre 2002 y 2025. Tras registrar tasas superiores al 4% hasta 2008, la variación cayó drásticamente, llegando a ser negativa en el período 2014-2016. Desde ese mínimo, se observa una clara recuperación y una aceleración post-2022 que sitúa la variación proyectada para 2025 cerca del 2.5%.\n\n## ¿Donde sube más el alquiler?\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndf_vivienda_promedios_maxs <- df_FINAL_VIVIENDA %>% \n                         group_by(CCAA) %>%\n                         summarise(media_var_anual = mean(var_anual_precio_alquiler))%>%\n                         ungroup() %>%\n                         slice_max(media_var_anual, n = 5)\n                      \np2 <- ggplot(df_vivienda_promedios_maxs, aes(x = forcats::fct_reorder(CCAA, media_var_anual), y = media_var_anual)) +\n  geom_col(fill = \"lightblue\") +\n  coord_flip() +\n  labs(title = \"Gráfico 9: Las 5 comunidades con una mayor variación\\nanual media del precio de alquiler\",\n       subtitle = \"Periodo comprendido entre 2002-2025\",\n       caption = \"Fuente: INE\",\n       x = \"Comunidades Autónomas\",\n       y = \"Variación anual media (%)\")\np2\n```\n\n::: {.cell-output-display}\n![](my_trabajo_BigData_files/figure-html/P error 3-1.png){fig-align='center' width=95%}\n:::\n:::\n\n\nEl Gráfico 9 identifica las 5 comunidades autónomas con la mayor variación anual media en el precio del alquiler durante el periodo 2002-2025. Liderando la lista se encuentran las Islas Baleares, seguidas muy de cerca por Cataluña, ambas con una variación media superior al 2.1%. Las comunidades de Aragón, Comunidad de Madrid y País Vasco cierran el top 5, manteniendo también variaciones medias anuales por encima del 2.0% para todo el período. Se muestra en un plot de barras con las coordenas invertidas y con el paquete forcats utilizamos la funcion fct_reorder para ordenar de mayor a menor\n\nVemos la evolución de las 5 comunidades que han experimentado una mayor variación anual media del precio de alquiler durante los periodos 2002-2025. Primero hacemos el gráfico de lineas y luego con el paquete gganimate lo hacemos animado. Se puede ver una disminución de la variación anual en las 5 CCAA en el año 2010 debido a la crisis inmobiliaria.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndf_vivienda_maxs <- df_FINAL_VIVIENDA %>% \n                    filter(CCAA %in% \n                    c(\"04 Balears, Illes\",\"09 Cataluña\",\"02 Aragón\",\"13 Madrid, Comunidad de\",\"16 País Vasco\"))\n\np4 <-  ggplot(df_vivienda_maxs, aes(x = Periodo_Fecha, y = var_anual_precio_alquiler, color = CCAA)) +\n       geom_line() +\n       labs(title = \"Gráfico 10: Evolución de la variación anual del precio del alquiler\\nde las 5 comunidades\",\n        subtitle = \"Periodo comprendido entre 2002-2025\",\n        caption = \"Fuente: INE\",\n        x = \"Periodo (años)\",\n        y = \"Variación anual (%)\",\n        color = \"Comunidades Autónomas\") \n\ngrafico_ani_top5 <- p4 +\n  transition_reveal(Periodo_Fecha) +  \n  enter_fade() +\n  exit_fade()\n\ngrafico_ani_top5\n```\n\n::: {.cell-output-display}\n![](my_trabajo_BigData_files/figure-html/P error 4-1.gif){fig-align='center' width=95%}\n:::\n:::\n\n\nEl Gráfico 10 muestra que, aunque las 5 comunidades comenzaron el periodo 2002-2025 con tasas de crecimiento anual superiores al 4%, todas experimentaron una fuerte y simultánea caída hasta el entorno de 2014-2016, llegando incluso a tasas negativas. A partir de 2016, las variaciones se recuperaron y fluctuaron alrededor del 1% al 2.5%, con las Islas Baleares liderando el crecimiento en varios puntos y la Comunidad de Madrid mostrando una menor variación en el último periodo. En general, se observa una alta correlación en el ciclo de precios entre estas cinco comunidades.\n\n## ¿Donde baja más el alquiler?\n\nAhora, buscamos lo contrario, qué 8 comunidades han experimentado una menor variación anual promedio del precio de alquiler en el periodo 2002-2025.En este hacemos lo mismo pero con las 8 comunidades con menor variación anual media. Aquí ningún valor supera el 1.75% de variación media y con el condicional ifelse destacamos que la comunidad que menos ha variado es Navarra. También utilizamos la función fct_reorder para ordenar de mayor a menor y quitamos la leyenda. El resto de comunidades de este grupo, incluyendo Melilla y Asturias, se mantienen en un rango muy estrecho de variaciones, confirmando que estas son las regiones donde el alquiler se ha moderado más.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndf_vivienda_promedios_mins <- df_FINAL_VIVIENDA %>% \n  group_by(CCAA) %>%\n  summarise(media_var_anual = mean(var_anual_precio_alquiler))%>%\n  ungroup() %>%\n  slice_min(media_var_anual, n = 8)\n\np3 <- ggplot(df_vivienda_promedios_mins, \n      aes(x = forcats::fct_reorder(CCAA, media_var_anual), y = media_var_anual, \n      fill = ifelse (CCAA == \"15 Navarra, Comunidad Foral de\", \"darkred\", \"lightblue\"))) +\n      geom_col() +\n      coord_flip() +\n      labs(title = \"Gráfico 11: Las 5 comunidades que han experimentado\\nuna menor variación anual media del precio de alquiler\",\n       subtitle = \"Periodo comprendido entre 2002-2025\",\n       caption = \"Fuente INE\",\n       x = \"Comunidades Autónomas\",\n       y = \"Variación anual media (%)\") +\n      theme(legend.position = \"none\")\np3\n```\n\n::: {.cell-output-display}\n![](my_trabajo_BigData_files/figure-html/unnamed-chunk-12-1.png){fig-align='center' width=95%}\n:::\n:::\n\n\nMostramos los datos en una tabla con el paquete DT\nUtilizamos las opciones para dejarla mas limpia y la función formatRound para limitar la columna media_var_anual a 2 decimales\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nDT::datatable(df_vivienda_promedios_mins,\n  options = list(dom = \"t\", columnDefs = list(list(targets = \"_all\", className = \"dt-center\"))),\n  caption = \"Tabla 3: Las 8 comunidades han experimentado una menor variación anual promedio del precio de alquiler\") %>% \n  formatRound(\"media_var_anual\", 2) \n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"datatables html-widget html-fill-item\" id=\"htmlwidget-17608f9cd022ef85cf52\" style=\"width:100%;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-17608f9cd022ef85cf52\">{\"x\":{\"filter\":\"none\",\"vertical\":false,\"caption\":\"<caption>Tabla 3: Las 8 comunidades han experimentado una menor variación anual promedio del precio de alquiler<\\/caption>\",\"data\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\"],[\"15 Navarra, Comunidad Foral de\",\"17 Rioja, La\",\"05 Canarias\",\"11 Extremadura\",\"14 Murcia, Región de\",\"07 Castilla y León\",\"08 Castilla - La Mancha\",\"03 Asturias, Principado de\",\"19 Melilla\"],[1.370833333333333,1.495833333333333,1.583333333333333,1.583333333333333,1.591666666666667,1.6125,1.6625,1.7375,1.7375]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>CCAA<\\/th>\\n      <th>media_var_anual<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"dom\":\"t\",\"columnDefs\":[{\"targets\":2,\"render\":\"function(data, type, row, meta) {\\n    return type !== 'display' ? data : DTWidget.formatRound(data, 2, 3, \\\",\\\", \\\".\\\", null);\\n  }\"},{\"targets\":\"_all\",\"className\":\"dt-center\"},{\"orderable\":false,\"targets\":0},{\"name\":\" \",\"targets\":0},{\"name\":\"CCAA\",\"targets\":1},{\"name\":\"media_var_anual\",\"targets\":2}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false}},\"evals\":[\"options.columnDefs.0.render\"],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n## Mapa de coropletas de la variación anual promedio del precio de alquiler del periodo 2002-2025\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n#Obtenemos el mapa del paquete del curso \n\ndf_mapa <- pjpv.curso.R.2022::LAU2_prov_2020_canarias\n\n#Primero agregamos provincias para obtener geometrías para las CCAA (script)\n\nccaa <- df_mapa %>% \n  group_by(ine_ccaa, ine_ccaa.n, ine_ccaa.n.pjp) %>% \n  summarise() %>% \n  ungroup()\n\n#Modificamos nuestro dataframe creando la media de todas las CCAAs. También creamos la columna común\n\ndf_vivienda_promedios <- df_FINAL_VIVIENDA %>% \n  group_by(CCAA) %>%\n  summarise(media_var_anual = mean(var_anual_precio_alquiler))%>%\n  filter(CCAA != \"Nacional\") %>%\n  ungroup()%>%\n  mutate( ine_ccaa = str_pad( string = row_number(), \n    width = 2,            \n    pad = \"0\",           \n    side = \"left\"), \n    .before = CCAA)\n\n#Con la función left_join creamos nuestro dataframe preparado para hacer el plot de coropletas\n\ndf_mapa <- left_join(ccaa, df_vivienda_promedios, by = \"ine_ccaa\") %>%\n           select(ine_ccaa,ine_ccaa.n,geometry,media_var_anual)\n\n#Con print podemos ver la estructura del df en la consola\n\nprint(df_mapa)\n#> Simple feature collection with 19 features and 3 fields\n#> Geometry type: GEOMETRY\n#> Dimension:     XY\n#> Bounding box:  xmin: -11.90152 ymin: 35.17045 xmax: 4.327785 ymax: 43.79238\n#> Geodetic CRS:  ETRS89\n#> # A tibble: 19 × 4\n#>    ine_ccaa ine_ccaa.n                                  geometry media_var_anual\n#>    <chr>    <chr>                                 <GEOMETRY [°]>           <dbl>\n#>  1 01       Andalucía                  MULTIPOLYGON (((-4.26887…            2.02\n#>  2 02       Aragón                     POLYGON ((-1.571136 40.2…            2.16\n#>  3 03       Asturias, Principado de    MULTIPOLYGON (((-7.13843…            1.74\n#>  4 04       Balears, Illes             MULTIPOLYGON (((1.157426…            2.32\n#>  5 05       Canarias                   MULTIPOLYGON (((-9.56273…            1.58\n#>  6 06       Cantabria                  MULTIPOLYGON (((-4.77327…            1.95\n#>  7 07       Castilla y León            MULTIPOLYGON (((-4.08134…            1.61\n#>  8 08       Castilla-La Mancha         MULTIPOLYGON (((-3.38046…            1.66\n#>  9 09       Cataluña                   MULTIPOLYGON (((0.615536…            2.25\n#> 10 10       Comunitat Valenciana       MULTIPOLYGON (((-1.41691…            1.97\n#> 11 11       Extremadura                POLYGON ((-7.474915 39.5…            1.58\n#> 12 12       Galicia                    MULTIPOLYGON (((-8.94933…            1.84\n#> 13 13       Madrid, Comunidad de       MULTIPOLYGON (((-4.45567…            2.06\n#> 14 14       Murcia, Región de          MULTIPOLYGON (((-2.29836…            1.59\n#> 15 15       Navarra, Comunidad Foral … MULTIPOLYGON (((-2.42493…            1.37\n#> 16 16       País Vasco                 MULTIPOLYGON (((-2.41260…            2.04\n#> 17 17       Rioja, La                  POLYGON ((-3.091347 42.5…            1.50\n#> 18 18       Ceuta                      MULTIPOLYGON (((-5.38192…            1.84\n#> 19 19       Melilla                    MULTIPOLYGON (((-4.29690…            1.74\n\n#Creamos el dataframe con los cuartiles \n\ndf_mapa_ntiles <- df_mapa %>%\n   mutate(CLASE_COROPLETAS_NTILE = ntile(media_var_anual, 4)) %>%\n   mutate(\n    CLASE_COROPLETAS_NTILE = case_when(\n      CLASE_COROPLETAS_NTILE == 1 ~ \"Cuartil 1 - Variación Baja\",\n      CLASE_COROPLETAS_NTILE == 2 ~ \"Cuartil 2 - Variación Media-Baja\",\n      CLASE_COROPLETAS_NTILE == 3 ~ \"Cuartil 3 - Variación Media-Alta\",\n      CLASE_COROPLETAS_NTILE == 4 ~ \"Cuartil 4 - Variación Alta\"))\n \n#Mapeamos\n\nggplot(data = df_mapa_ntiles) +\n  geom_sf(aes(fill = CLASE_COROPLETAS_NTILE),\n          color = \"Black\",\n          linewidth = 0.3) +\n  scale_fill_brewer(palette = \"Blues\",\n          name = \"Variación Anual Media\\n(Clasificación por Cuartiles)\") +\n  labs(title = \"Mapa 2: Variación Anual Media del precio del alquiler por CCAA\",\n          subtitle = \"Promedio obtenido de 2002-2025 (Expresado en variación porcentual)\",\n          caption = \"Fuente: Instituto Nacional de Estadística\") +\n  theme_void()\n```\n\n::: {.cell-output-display}\n![](my_trabajo_BigData_files/figure-html/unnamed-chunk-14-1.png){fig-align='center' width=95%}\n:::\n:::\n\n\nEn el Mapa 2 se observa la variación media anual del alquiler (2002-2025), muestra una fuerte dualidad territorial en España. Las subidas más altas (Cuartil 4) se concentran de forma clara en el Mediterráneo, lideradas por Cataluña y las Islas Baleares. La Comunidad de Madrid y la Comunidad Valenciana se sitúan en el cuartil de variación media-alta (Cuartil 3). En contraste, las regiones de la mitad oeste (Galicia, Extremadura, Castilla y León) presentan la variación más baja (Cuartil 1). El patrón subraya una mayor presión de la demanda en zonas costeras y en los principales centros económicos del país.\n\n<br>\n\n### Información sobre la sesión\n\nAbajo muestro mi entorno de trabajo y paquetes utilizados\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n<details closed>\n<summary> <span title='Click to Expand'> current session info </span> </summary>\n\n```r\n\n─ Session info ───────────────────────────────────────────────────────────────\n setting  value\n version  R version 4.5.2 (2025-10-31 ucrt)\n os       Windows 11 x64 (build 26200)\n system   x86_64, mingw32\n ui       RTerm\n language (EN)\n collate  Spanish_Spain.utf8\n ctype    Spanish_Spain.utf8\n tz       Europe/Madrid\n date     2025-12-17\n pandoc   3.6.3 @ C:/Program Files/RStudio/resources/app/bin/quarto/bin/tools/ (via rmarkdown)\n quarto   NA @ C:\\\\PROGRA~1\\\\RStudio\\\\RESOUR~1\\\\app\\\\bin\\\\quarto\\\\bin\\\\quarto.exe\n\n─ Packages ───────────────────────────────────────────────────────────────────\n package           * version    date (UTC) lib source\n assertthat          0.2.1      2019-03-21 [1] CRAN (R 4.5.2)\n backports           1.5.0      2024-05-23 [1] CRAN (R 4.5.2)\n bibtex              0.5.1      2023-01-26 [1] CRAN (R 4.5.2)\n bit                 4.6.0      2025-03-06 [1] CRAN (R 4.5.2)\n bit64               4.6.0-1    2025-01-16 [1] CRAN (R 4.5.2)\n bslib               0.9.0      2025-01-30 [1] CRAN (R 4.5.2)\n cachem              1.1.0      2024-05-16 [1] CRAN (R 4.5.2)\n cellranger          1.1.0      2016-07-27 [1] CRAN (R 4.5.2)\n class               7.3-23     2025-01-01 [2] CRAN (R 4.5.2)\n classInt          * 0.4-11     2025-01-08 [1] CRAN (R 4.5.2)\n cli                 3.6.5      2025-04-23 [1] CRAN (R 4.5.2)\n clipr               0.8.0      2022-02-22 [1] CRAN (R 4.5.2)\n countrycode         1.6.1      2025-03-31 [1] CRAN (R 4.5.2)\n crayon              1.5.3      2024-06-20 [1] CRAN (R 4.5.2)\n crosstalk           1.2.2      2025-08-26 [1] CRAN (R 4.5.2)\n curl                7.0.0      2025-08-19 [1] CRAN (R 4.5.2)\n data.table          1.17.8     2025-07-10 [1] CRAN (R 4.5.2)\n DBI                 1.2.3      2024-06-02 [1] CRAN (R 4.5.2)\n desc                1.4.3      2023-12-10 [1] CRAN (R 4.5.2)\n details             0.4.0      2025-02-09 [1] CRAN (R 4.5.2)\n devtools            2.4.6      2025-10-03 [1] CRAN (R 4.5.2)\n digest              0.6.39     2025-11-19 [1] CRAN (R 4.5.2)\n dplyr             * 1.1.4      2023-11-17 [1] CRAN (R 4.5.2)\n DT                * 0.34.0     2025-09-02 [1] CRAN (R 4.5.2)\n e1071               1.7-16     2024-09-16 [1] CRAN (R 4.5.2)\n ellipsis            0.3.2      2021-04-29 [1] CRAN (R 4.5.2)\n eurostat          * 4.0.0      2023-12-19 [1] CRAN (R 4.5.2)\n evaluate            1.0.5      2025-08-27 [1] CRAN (R 4.5.2)\n farver              2.1.2      2024-05-13 [1] CRAN (R 4.5.2)\n fastmap             1.2.0      2024-05-15 [1] CRAN (R 4.5.2)\n fontawesome         0.5.3      2024-11-16 [1] CRAN (R 4.5.2)\n forcats           * 1.0.1      2025-09-25 [1] CRAN (R 4.5.2)\n fs                  1.6.6      2025-04-12 [1] CRAN (R 4.5.2)\n generics            0.1.4      2025-05-09 [1] CRAN (R 4.5.2)\n gganimate         * 1.0.11     2025-09-04 [1] CRAN (R 4.5.2)\n ggplot2           * 4.0.1      2025-11-14 [1] CRAN (R 4.5.2)\n ggthemes          * 5.2.0      2025-11-30 [1] CRAN (R 4.5.2)\n gifski            * 1.32.0-2   2025-03-18 [1] CRAN (R 4.5.2)\n giscoR            * 1.0.0      2025-12-10 [1] CRAN (R 4.5.2)\n glue                1.8.0      2024-09-30 [1] CRAN (R 4.5.2)\n gt                * 1.1.0      2025-09-23 [1] CRAN (R 4.5.2)\n gtable              0.3.6      2024-10-25 [1] CRAN (R 4.5.2)\n gtExtras          * 0.6.1      2025-10-10 [1] CRAN (R 4.5.2)\n here                1.0.2      2025-09-15 [1] CRAN (R 4.5.2)\n hms                 1.1.4      2025-10-17 [1] CRAN (R 4.5.2)\n htmltools           0.5.9      2025-12-04 [1] CRAN (R 4.5.2)\n htmlwidgets         1.6.4      2023-12-06 [1] CRAN (R 4.5.2)\n httr                1.4.7      2023-08-15 [1] CRAN (R 4.5.2)\n httr2               1.2.2      2025-12-08 [1] CRAN (R 4.5.2)\n ISOweek             0.6-2      2011-09-07 [1] CRAN (R 4.5.2)\n jquerylib           0.1.4      2021-04-26 [1] CRAN (R 4.5.2)\n jsonlite          * 2.0.0      2025-03-27 [1] CRAN (R 4.5.2)\n KernSmooth          2.23-26    2025-01-01 [2] CRAN (R 4.5.2)\n knitr               1.50       2025-03-16 [1] CRAN (R 4.5.2)\n labeling            0.4.3      2023-08-29 [1] CRAN (R 4.5.2)\n lifecycle           1.0.4      2023-11-07 [1] CRAN (R 4.5.2)\n lubridate         * 1.9.4      2024-12-08 [1] CRAN (R 4.5.2)\n magrittr            2.0.4      2025-09-12 [1] CRAN (R 4.5.2)\n memoise             2.0.1      2021-11-26 [1] CRAN (R 4.5.2)\n otel                0.2.0      2025-08-29 [1] CRAN (R 4.5.2)\n paletteer           1.6.0      2024-01-21 [1] CRAN (R 4.5.2)\n patchwork         * 1.3.2      2025-08-25 [1] CRAN (R 4.5.2)\n pillar              1.11.1     2025-09-17 [1] CRAN (R 4.5.2)\n pjpv.curso.R.2022   0.0.0.9000 2025-12-15 [1] Github (perezp44/pjpv.curso.R.2022@bd4dd73)\n pkgbuild            1.4.8      2025-05-26 [1] CRAN (R 4.5.2)\n pkgconfig           2.0.3      2019-09-22 [1] CRAN (R 4.5.2)\n pkgload             1.4.1      2025-09-23 [1] CRAN (R 4.5.2)\n plyr              * 1.8.9      2023-10-02 [1] CRAN (R 4.5.2)\n png                 0.1-8      2022-11-29 [1] CRAN (R 4.5.2)\n prettyunits         1.2.0      2023-09-24 [1] CRAN (R 4.5.2)\n progress            1.2.3      2023-12-06 [1] CRAN (R 4.5.2)\n proxy               0.4-28     2025-12-11 [1] CRAN (R 4.5.2)\n purrr             * 1.2.0      2025-11-04 [1] CRAN (R 4.5.2)\n pxR               * 0.42.8     2025-04-06 [1] CRAN (R 4.5.2)\n R6                  2.6.1      2025-02-15 [1] CRAN (R 4.5.2)\n ragg              * 1.5.0      2025-09-02 [1] CRAN (R 4.5.2)\n rappdirs            0.3.3      2021-01-31 [1] CRAN (R 4.5.2)\n RColorBrewer        1.1-3      2022-04-03 [1] CRAN (R 4.5.2)\n Rcpp                1.1.0      2025-07-02 [1] CRAN (R 4.5.2)\n readr             * 2.1.6      2025-11-14 [1] CRAN (R 4.5.2)\n readxl              1.4.5      2025-03-07 [1] CRAN (R 4.5.2)\n RefManageR          1.4.0      2022-09-30 [1] CRAN (R 4.5.2)\n regions             0.1.8      2021-06-21 [1] CRAN (R 4.5.2)\n rematch2            2.1.2      2020-05-01 [1] CRAN (R 4.5.2)\n remotes             2.5.0      2024-03-17 [1] CRAN (R 4.5.2)\n reshape2          * 1.4.5      2025-11-12 [1] CRAN (R 4.5.2)\n rlang               1.1.6      2025-04-11 [1] CRAN (R 4.5.2)\n rmarkdown           2.30       2025-09-28 [1] CRAN (R 4.5.2)\n rprojroot           2.1.1      2025-08-26 [1] CRAN (R 4.5.2)\n rstudioapi          0.17.1     2024-10-22 [1] CRAN (R 4.5.2)\n s2                  1.1.9      2025-05-23 [1] CRAN (R 4.5.2)\n S7                  0.2.1      2025-11-14 [1] CRAN (R 4.5.2)\n sass                0.4.10     2025-04-11 [1] CRAN (R 4.5.2)\n scales              1.4.0      2025-04-24 [1] CRAN (R 4.5.2)\n sessioninfo         1.2.3      2025-02-05 [1] CRAN (R 4.5.2)\n sf                * 1.0-23     2025-11-28 [1] CRAN (R 4.5.2)\n stringi             1.8.7      2025-03-27 [1] CRAN (R 4.5.2)\n stringr           * 1.6.0      2025-11-04 [1] CRAN (R 4.5.2)\n systemfonts         1.3.1      2025-10-01 [1] CRAN (R 4.5.2)\n textshaping         1.0.4      2025-10-10 [1] CRAN (R 4.5.2)\n tibble            * 3.3.0      2025-06-08 [1] CRAN (R 4.5.2)\n tidyr             * 1.3.1      2024-01-24 [1] CRAN (R 4.5.2)\n tidyselect          1.2.1      2024-03-11 [1] CRAN (R 4.5.2)\n tidyverse         * 2.0.0      2023-02-22 [1] CRAN (R 4.5.2)\n timechange          0.3.0      2024-01-18 [1] CRAN (R 4.5.2)\n tweenr              2.0.3      2024-02-26 [1] CRAN (R 4.5.2)\n tzdb                0.5.0      2025-03-15 [1] CRAN (R 4.5.2)\n units               1.0-0      2025-10-09 [1] CRAN (R 4.5.2)\n usethis             3.2.1      2025-09-06 [1] CRAN (R 4.5.2)\n utf8                1.2.6      2025-06-08 [1] CRAN (R 4.5.2)\n vctrs               0.6.5      2023-12-01 [1] CRAN (R 4.5.2)\n viridisLite         0.4.2      2023-05-02 [1] CRAN (R 4.5.2)\n vroom               1.6.7      2025-11-28 [1] CRAN (R 4.5.2)\n withr               3.0.2      2024-10-28 [1] CRAN (R 4.5.2)\n wk                  0.9.4      2024-10-11 [1] CRAN (R 4.5.2)\n xfun                0.54       2025-10-30 [1] CRAN (R 4.5.2)\n xml2                1.5.1      2025-12-01 [1] CRAN (R 4.5.2)\n yaml                2.3.12     2025-12-10 [1] CRAN (R 4.5.2)\n\n [1] C:/Users/Juan Pablo/AppData/Local/R/win-library/4.5\n [2] C:/Program Files/R/R-4.5.2/library\n * ── Packages attached to the search path.\n\n──────────────────────────────────────────────────────────────────────────────\n\n```\n\n</details>\n<br>\n:::\n:::\n",
    "supporting": [
      "my_trabajo_BigData_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"site_libs/htmltools-fill-0.5.9/fill.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/htmlwidgets-1.6.4/htmlwidgets.js\"></script>\n<link href=\"site_libs/datatables-css-0.0.0/datatables-crosstalk.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/datatables-binding-0.34.0/datatables.js\"></script>\n<script src=\"site_libs/jquery-3.6.0/jquery-3.6.0.min.js\"></script>\n<link href=\"site_libs/dt-core-1.13.6/css/jquery.dataTables.min.css\" rel=\"stylesheet\" />\n<link href=\"site_libs/dt-core-1.13.6/css/jquery.dataTables.extra.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/dt-core-1.13.6/js/jquery.dataTables.min.js\"></script>\n<link href=\"site_libs/crosstalk-1.2.2/css/crosstalk.min.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/crosstalk-1.2.2/js/crosstalk.min.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}